# Product Requirements Document (PRD): Веб-приложение "Мой личный косметолог"

## 1. Введение

**"Мой личный косметолог"** — это премиальное веб-приложение для получения персонализированных рекомендаций по уходу за кожей лица с использованием передовых AI-технологий. Приложение помогает пользователям с любым уровнем знаний о косметологии получать профессиональные советы, анализировать состояние кожи и отслеживать прогресс ухода.

### 1.1 Цель проекта
Создать интуитивно понятный и визуально впечатляющий инструмент, который демократизирует доступ к профессиональным косметологическим знаниям, используя искусственный интеллект для персонализации рекомендаций.

### 1.2 Целевая аудитория
*   Люди всех возрастов и полов, желающие улучшить состояние кожи.
*   Пользователи, ищущие структурированный подход к уходу.
*   Те, кто хочет отслеживать изменения кожи во времени.

## 2. Ключевые Функции (MVP и Roadmap)

### 2.1 Ядро продукта (MVP)
1.  **AI-Консультации (Google AI - Gemini 3 Flash)**:
    *   Анализ текстового описания проблем кожи.
    *   Учет профиля пользователя (возраст, тип кожи, аллергии).
    *   Выдача персонализированных рекомендаций через OAuth (Antigravity).
2.  **Профиль пользователя**:
    *   Сбор данных: тип кожи, чувствительность, проблемы, цели.
    *   Хранение истории на сервере (Supabase).
3.  **Аутентификация (Supabase Auth)**:
    *   Регистрация/Вход (Email/Password, Social Login - опционально).
    *   Управление сессиями.
4.  **Рекомендации**:
    *   Структурированные программы ухода (Утро/Вечер).
    *   Конкретные продукты с возможностью выбора ценовой категории.
    *   Советы по образу жизни.

### 2.2 Расширенные функции
5.  **Анализ фото кожи (Google Vision AI - Gemini 3 Flash)**:
    *   Загрузка фото и анализ состояния кожи (акне, морщины, поры).
    *   Хранение фото в защищенном облаке (Supabase Storage).
6.  **Календарь ухода**:
    *   Планирование процедур.
    *   Напоминания (email/push).
7.  **Отслеживание прогресса**:
    *   Сравнение фото "До/После".
    *   Графики улучшений.
8.  **Чат с AI-косметологом**:
    *   Контекстное общение в реальном времени.

## 3. Технические Требования

### 3.1 Архитектура
*   **Тип приложения**: Fullstack Web Application.
*   **Framework**: Next.js (App Router).
*   **Backend as a Service (BaaS)**: Supabase.
*   **AI**: Google Generative AI (Gemini 3 Flash via OAuth / Antigravity).
*   **Управление состоянием**: Zustand (UI) + TanStack Query (Data).
*   **Линтинг/Форматирование**: Biome.
*   **Хранение данных**: Supabase Database (PostgreSQL).
*   **Аутентификация**: Supabase Auth.
*   **Хранение файлов**: Supabase Storage.
*   **Edge Functions**: Supabase Edge Functions (для безопасного вызова Google AI API).

### 3.3 Дизайн-система (Premium Aesthetics)
*   **Концепция**: "Glassmorphism & Glow".
*   **Цветовая палитра**:
    *   *Light*: Нежно-розовый (#F8E8E8), Персиковый (#E6B8A2), Мягкий голубой (#A8D5E2).
    *   *Dark*: Глубокий черный (#1A1A1A), Темно-серый (#2D2D2D), Акцентный персиковый (#E6B8A2).
*   **Типографика**: **Manrope** (или аналогичный строгий геометрический гротеск) для основного текста, **Playfair Display** (или **Tenor Sans**) для акцентов. **Inter запрещен**.
*   **Компоненты**: Shadcn UI, стилизованные под премиум:
    *   Скругленные углы (radius-lg, radius-xl).
    *   Мягкие тени и блюр (backdrop-filter).
    *   Градиентные бордеры и кнопки.

## 4. Схема Базы Данных (Supabase/PostgreSQL)

### 4.1 Таблицы
*   `profiles`: Расширение стандартной таблицы `auth.users`. Хранит имя, аватар, настройки.
*   `skin_profiles`: Данные о коже (тип, проблемы, аллергии). Связь 1:1 с `profiles`.
*   `consultations`: История запросов к AI. Связь 1:M с `profiles`.
    *   Поля: `query` (text), `response_json` (jsonb), `created_at`.
*   `routine_items`: Элементы программы ухода.
*   `progress_photos`: Ссылки на фото в Storage и метаданные.
*   `calendar_events`: События и напоминания.

## 5. План Разработки

### Этап 1: Инициализация (1 Неделя)
### Этап 0: Дизайн-концепция (Срочно)
1.  Создание страницы `demo/design-check` (статическая верстка или Next.js page).
2.  Демонстрация шрифтов, цветов, кнопок и Glassmorphism эффектов.
3.  Утверждение стиля перед основной разработкой.

### Этап 1: Инициализация (1 Неделя)
1.  Настройка репозитория (Next.js + TS).
2.  Настройка Tailwind + Shadcn UI.
3.  Настройка Supabase проекта (локально или cloud).
4.  Базовая верстка главной страницы с "Wow"-дизайном.

### Этап 2: Профиль и Аутентификация (1-2 Недели)
1.  Интеграция Supabase Auth.
2.  Создание форм регистрации/входа (Shadcn Form).
3.  Страница профиля и анкета кожи.
4.  Сохранение данных в БД.

### Этап 3: AI-Консультации (2 Недели)
1.  Интеграция с `ai-sdk-provider-gemini-cli` через OAuth.
2.  Интерфейс чата/формы для запроса.
3.  Парсинг ответа AI и красивое отображение рекомендаций.
4.  Сохранение истории в БД.

### Этап 4: Расширенные функции (2-3 Недели)
1.  Загрузка фото (Supabase Storage).
2.  Календарь процедур.
3.  Дашборд прогресса.

## 6. Критерии Приемки (Definition of Done)
*   Код написан на TypeScript без ошибок (`biome check` проходит).
*   UI соответствует премиум-дизайну (анимации, адаптивность).
*   Все основные функции (регистрация, профиль, AI-запрос) работают без ошибок.
*   Данные надежно сохраняются в Supabase.
*   Приложение запускается одной командой (`bun run dev`).
